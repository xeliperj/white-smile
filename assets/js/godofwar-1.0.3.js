(function(a){const b={config:{version:"1.0.3",offers:[],backRedirect:{start:!1,href:"/",time:750}},init(a){this.config={...this.config,...a},this.config.backRedirect.start&&this.configure()},configure(){a.location.hash="#no-back",setTimeout(()=>{a.location.hash="#",setTimeout(()=>{this.setEventListener()},300)},this.config.backRedirect.time||750)},hasChanged(){try{if("#no-back"!==a.location.hash)return;a.location.hash="#";const b=new URL(a.location.href);let c=this.config.backRedirect.href;c.startsWith("http")||("/"===c[0]&&(c=c.substr(1)),c=`${b.origin}/${c}`);const d={...this.getQuery(c),...this.getQuery(a.location.href)},e=this.objectToQuery(d),f=new URL(c);window.location.href=`${f.origin}${f.pathname}${e}`}catch(a){console.log(a)}},setEventListener(){a.addEventListener?a.addEventListener("hashchange",()=>this.hasChanged(),!1):a.attachEvent?a.attachEvent("onhashchange",()=>this.hasChanged()):a.onhashchange=()=>this.hasChanged()},offerClick(b){const c=this.config.offers.find(a=>a.value===b),d=new URL(c.link),e={...this.getQuery(c.link),...this.getQuery(a.location.href)},f=this.objectToQuery(e);window.location.href=`${d.origin}${d.pathname}${f}`},getQuery(a){const b=new URL(a),c={};return b.search.replace("?","").split("&").forEach(a=>{if(a){const b=a.split("=");c[b[0]]=b[1]}}),c},objectToQuery(a){a||(a={});const b=Object.keys(a).map(b=>`${encodeURIComponent(b)}=${encodeURIComponent(a[b])}`).join("&");return b?`?${b}`:""}};a.ofwar=function(){b.init(...arguments)},a.clickFn=function(){b.offerClick(...arguments)}})(window,document);